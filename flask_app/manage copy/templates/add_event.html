{% extends 'admin-nav.html' %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='manage/css/form.css') }}">
<title>Add Event</title>
{% endblock %}

{% block body %}
    <div class="event">
        <div class="title-bar">
            <h1>Add an Event</h1>
        </div>
        <br>
        <div class="form-container">
            <form action="/add_event", method="POST" id=event>
                <label name="title">Title</label>
                <input type="text" name="title", id="title">
                <br>
                <label name="time">Time</label>
                <input type="text" name="time", id="time">
                <br>
                <label name="date">Date</label>
                <input type="date" name="date", id="date">
                <br>
                <label name="description">Discription</label>
                <textarea name="description" form="event"></textarea>
                <br>
                <label name="n-days">This event repeats every X number of days</label>
                <input type="text" name="n-days", id="n-days" placeholder="Enter X as a number. Hint: 7 = every week. Leave blank for no repeat!">
                <br>
                <label name="n-times">How many times do you want to repeat this event?</label>
                <input type="text" name="n-times", id="n-times" placeholder="Enter as number.">
                <br>

                <input type="submit" value="Add Event">

            </form>
        </div>
        <br>
        <br>
        <div class="pag">
            {% for page_num in event.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
            {% if page_num %}
                {% if event.page == page_num %}
                    <a class="btn btn-info mb-4" href="{{ url_for('manage.add_event', page=page_num) }}">{{ page_num }}</a>
                    {% else %}
                    <a class="btn btn-outline-info mb-4" href="{{ url_for('manage.add_event', page=page_num) }}">{{ page_num }}</a>
                {% endif %}
                {% else %}
                ...
            {% endif %}
            {% endfor %}
        </div>
        <table id="main-table">
            <tr>
                <th class="title">Title</th>
                <th class="time">Time</th>
                <th>Date</th>
                <th>Content</th>
            </tr>
            {% for guild_event in event.items %}
            
            <tr>
                <td>{{ guild_event.title }}</td>
                <td>{{ guild_event.time }}</td>
                <td>{{ guild_event.date.strftime('%Y-%m-%d') }}</td>
                <td>{{ guild_event.description }}</td>
                <td>
                    <a id="delete" href="/confirm?id={{ guild_event.id }}&confirm_type=Event">Delete</a>
                    <br>
                    <a id="update" href="/event_update/{{ guild_event.id }}">Update</a>
                </td>
            </tr>
            
            {% endfor %}
        </table>

    </div>

{% endblock %}